<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" data-translate-meta-description="metaDescriptionContent" content="Download music and video from YouTube, YouTube Music and SoundCloud in MP3, M4A, Opus or MP4 formats.">
    <meta name="theme-color" content="#0f172a">
    <title data-translate-key="pageTitle">YouTube, YouTube Music & SoundCloud Downloader</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>
<body class="text-white min-h-screen flex flex-col items-center p-4 selection:bg-sky-500 selection:text-white bg-mode-night">
    <div class="night-sky-bg-main">
        <div class="moon-main"></div>
        <div class="reactbits-bg-layer reactbits-dot-grid" data-bg-layer="dot-grid">
            <div class="dot-grid-pattern"></div>
            <div class="dot-grid-glow"></div>
        </div>
        <div class="reactbits-bg-layer reactbits-faulty-terminal" data-bg-layer="faulty-terminal">
            <div class="faulty-terminal-noise"></div>
            <div class="faulty-terminal-scanline"></div>
            <div class="faulty-terminal-glitch"></div>
        </div>
        <div class="reactbits-bg-layer reactbits-aurora" data-bg-layer="aurora">
            <div class="aurora-band aurora-band-one"></div>
            <div class="aurora-band aurora-band-two"></div>
            <div class="aurora-stars"></div>
        </div>
        <div class="reactbits-bg-layer reactbits-dither" data-bg-layer="dither">
            <div class="dither-overlay"></div>
        </div>
    </div>

    <header class="top-nav-container">
        <div class="fluid-glass-nav">
            <div class="fluid-blob one"></div>
            <div class="fluid-blob two"></div>
            <div class="fluid-blob three"></div>
            <div class="fluid-nav-content">
                <div class="top-nav-buttons">
                    <button id="infoButton" class="nav-button" data-translate-key="navInfoButton">Info</button>
                    <button id="copyrightButton" class="nav-button" data-translate-key="navCopyrightButton">Copyright</button>
                    <button id="updatesButton" class="nav-button" data-translate-key="navUpdatesButton">Updates (Blog)</button>
                    <button id="githubButton" class="nav-button" data-translate-key="navGithubButton">GitHub</button>
                </div>
                <div class="header-controls">
                    <div class="lang-switcher-container">
                        <label for="languageSelector" data-translate-key="languageLabel">Language:</label>
                        <select id="languageSelector" title="Select Language">
                            <option value="en">English</option>
                            <option value="ru">Русский</option>
                            <option value="es">Español</option>
                            <option value="az">Azərbaycanca</option>
                            <option value="tr">Türkçe</option>
                        </select>
                    </div>
                    <div class="background-switcher-container">
                        <label for="backgroundSelector" data-translate-key="backgroundLabel">Background:</label>
                        <select id="backgroundSelector" title="Select Background">
                            <option value="night" data-translate-key="backgroundNight">Night Sky</option>
                            <option value="faulty-terminal" data-translate-key="backgroundFaultyTerminal">Faulty Terminal</option>
                            <option value="dot-grid" data-translate-key="backgroundDotGrid">Dot Grid</option>
                            <option value="aurora" data-translate-key="backgroundAurora">Aurora</option>
                            <option value="dither" data-translate-key="backgroundDither">Dither</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="app-container">
        <section id="downloaderContent" class="main-card">
            <div class="text-center mb-8 sm:mb-10">
                <div class="music-icon-animated inline-block mb-4">
                    <svg width="60" height="50" viewBox="0 0 60 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <line x1="5" y1="45" x2="5" y2="5" stroke="#0ea5e9" stroke-width="4" stroke-linecap="round"/>
                        <line x1="15" y1="45" x2="15" y2="15" stroke="#0ea5e9" stroke-width="4" stroke-linecap="round"/>
                        <line x1="25" y1="45" x2="25" y2="25" stroke="#0ea5e9" stroke-width="4" stroke-linecap="round"/>
                        <line x1="35" y1="45" x2="35" y2="10" stroke="#0ea5e9" stroke-width="4" stroke-linecap="round"/>
                        <line x1="45" y1="45" x2="45" y2="20" stroke="#0ea5e9" stroke-width="4" stroke-linecap="round"/>
                        <line x1="55" y1="45" x2="55" y2="30" stroke="#0ea5e9" stroke-width="4" stroke-linecap="round"/>
                    </svg>
                </div>
                <h1 data-translate-key="headerH1" class="text-4xl sm:text-5xl font-extrabold text-sky-400 tracking-tight">Music Jacker</h1>
                <p data-translate-key="headerP" class="text-slate-400 mt-3 text-lg">Paste a YouTube, YouTube Music or SoundCloud link</p>
            </div>

            <form id="downloadForm" class="space-y-6">
                <div>
                    <label for="youtube_url" data-translate-key="urlLabel" class="block text-sm font-medium text-slate-300 mb-2">YouTube/YouTube Music/SoundCloud Link:</label>
                    <input
                        type="url"
                        id="youtube_url"
                        name="youtube_url"
                        required
                        class="w-full px-4 py-3 bg-slate-700/70 border-2 border-slate-600 rounded-lg text-white placeholder-slate-500 focus:ring-0 focus:border-sky-500 transition duration-200 ease-in-out"
                        data-translate-placeholder="urlPlaceholder"
                        placeholder="e.g., https://music.youtube.com/watch?v=... or https://soundcloud.com/track"
                    >
                </div>

                <div>
                    <label for="format_choice" data-translate-key="formatLabel" class="block text-sm font-medium text-slate-300 mb-2">Select format:</label>
                    <select
                        id="format_choice"
                        name="format_choice"
                        class="w-full px-4 py-3 bg-slate-700/70 border-2 border-slate-600 rounded-lg text-white focus:ring-0 focus:border-sky-500 transition duration-200 ease-in-out"
                    >
                        <option value="mp3" selected data-translate-key="formatMp3">MP3 (recommended)</option>
                        <option value="m4a" data-translate-key="formatM4a">M4A (Apple AAC)</option>
                        <option value="opus" data-translate-key="formatOpus">Opus (high efficiency)</option>
                        <option value="mp4" data-translate-key="formatMp4">MP4 (video 720p)</option>
                    </select>
                </div>

                <button
                    type="submit"
                    id="submitButton"
                    data-translate-key="submitButton"
                    class="submit-button w-full bg-sky-500 hover:bg-sky-400 text-slate-900 font-semibold py-3.5 px-4 rounded-lg shadow-lg focus:outline-none focus:ring-4 focus:ring-sky-500/50"
                >
                    Download
                </button>
            </form>

            <div id="statusArea" class="mt-8 text-center min-h-[60px]"></div>

            <div id="telegramLinkContainer" class="telegram-link-container text-center hidden">
                <p>
                    <span data-translate-key="telegramSubscription">Subscribe to Telegram Channel of developers:</span>
                    <a href="https://t.me/ytdlpdeveloper" target="_blank" rel="noopener noreferrer">@ytdlpdeveloper</a>
                </p>
                <p class="mt-2">
                    <span data-translate-key="telegramBotAlternative">Telegram bot alternative:</span>
                    <a href="https://t.me/ytdlpload_bot" target="_blank" rel="noopener noreferrer">@ytdlpload_bot</a>
                </p>
            </div>
        </section>
    </main>

    <footer class="app-footer text-center text-slate-500 text-sm">
        <p data-translate-key="footerCopyrightText">© <span id="year"></span> Music Jacker. Site made by thebitsamurai.</p>
        <p class="text-xs mt-1" data-translate-key="footerWatermark">Developed By thebitsamurai</p>
    </footer>

    <section id="infoSectionOverlay" class="overlay-section">
        <button id="closeInfoButton" class="close-overlay-button" aria-label="Close Info">×</button>
        <div class="info-content-card">
            <h2 data-translate-key="infoTitle">Information</h2>
            <h3 data-translate-key="infoHowItWorksTitle">How This Site Works</h3>
            <p data-translate-key="infoHowItWorksPara1">This web application allows you to download audio/video from YouTube, SoundCloud or other videos/tracks or playlists. You simply paste the URL, choose your desired format (MP3, M4A, Opus or MP4), and the server-side script processes your request.</p>
            <p data-translate-key="infoHowItWorksPara2">The backend uses the powerful <code>yt-dlp</code> library to fetch content information and extract the audio/video stream. If MP3, M4A, Opus or MP4 format is selected, <code>ffmpeg</code> is used for conversion and to embed metadata.</p>
            <p data-translate-key="infoHowItWorksPara3">The downloaded file is temporarily stored on the server and then made available for you to download directly through your browser. After the download is served to you, the file is automatically deleted from the server to save space and ensure privacy.</p>

            <h3 data-translate-key="infoLibrariesTitle">Key Libraries & Technologies Used</h3>
            <ul>
                <li data-translate-key="infoLibFlask"><strong>Flask:</strong> A micro web framework for Python, used to build the backend API.</li>
                <li data-translate-key="infoLibYtdlp"><strong>yt-dlp:</strong> A command-line program to download videos/audio from YouTube, SoundCloud and many other sites. It's a fork of youtube-dl with additional features and fixes.</li>
                <li data-translate-key="infoLibFFmpeg"><strong>FFmpeg:</strong> A complete, cross-platform solution to record, convert and stream audio and video. Used here for format conversion (to MP3/M4A/Opus/MP4) and metadata embedding.</li>
                <li data-translate-key="infoLibTailwind"><strong>Tailwind CSS:</strong> A utility-first CSS framework for rapidly building custom user interfaces.</li>
                <li data-translate-key="infoLibJS"><strong>JavaScript:</strong> Used for frontend interactivity, language switching, animations, and communication with the backend API.</li>
            </ul>

            <h3 data-translate-key="infoPythonCodeTitle">Python Backend Code</h3>
            <p data-translate-key="infoPythonCodePara">The core backend logic is written in Python using the Flask framework. The Python script (typically named <code>app.py</code>) handles API requests, interacts with <code>yt-dlp</code> and <code>ffmpeg</code>, manages temporary file storage, and serves the files. This code runs on the server and is not directly visible here, but it ensures the functionality of the downloader.</p>

            <h3 data-translate-key="infoCreatorTitle">Creator</h3>
            <p data-translate-key="infoCreatorName">This Music Jacker site was created by <strong>thebitsamurai</strong>.</p>
        </div>
    </section>

    <section id="copyrightSectionOverlay" class="overlay-section">
        <button id="closeCopyrightButton" class="close-overlay-button" aria-label="Close Copyright">×</button>
        <div class="info-content-card">
            <h2 data-translate-key="copyrightTitle">Copyright & Responsibility</h2>
            <p data-translate-key="copyrightPara1">Please be aware that music and other audio content available on YouTube, SoundCloud and other platforms may be protected by copyright. Many artists and content creators have specific licenses and terms of use for their work. It is your responsibility to ensure that you have the necessary rights or permissions before downloading any content.</p>
            <p data-translate-key="copyrightPara2">The developer of this site provides this tool for convenience and is not responsible for the content you choose to download or how you use it. By using this service, you agree that you are solely responsible for your actions and for complying with all applicable copyright laws and terms of service of the content providers.</p>
        </div>
    </section>

<<<<<<< HEAD
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
=======
        @keyframes fluidGlow {
            0% { transform: translate3d(0,0,0) scale(1); opacity: 0.35; }
            100% { transform: translate3d(20px,-20px,0) scale(1.1); opacity: 0.55; }
        }
        @keyframes fluidBlob {
            0% { transform: translate3d(0,0,0) rotate(0deg); }
            50% { transform: translate3d(30px,-25px,0) rotate(12deg); }
            100% { transform: translate3d(-10px,10px,0) rotate(-6deg); }
        }

        .lang-switcher-container,
        .background-switcher-container {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
            color: #cbd5e1;
            letter-spacing: 0.08em;
            font-size: 0.7rem;
        }
        .lang-switcher-container label,
        .background-switcher-container label {
            font-weight: 600;
        }
        .lang-switcher-container label {
            text-transform: none;
        }
        .background-switcher-container label {
            text-transform: uppercase;
        }

        .main-card {
            background-color: rgba(30, 41, 59, 0.88);
            backdrop-filter: blur(10px);
            padding: 2rem 2.5rem;
            border-radius: 1.5rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.45);
            width: 100%;
            max-width: 580px;
            margin-top: 8rem;
            opacity: 0;
            transform: translateY(20px);
            animation: cardEnterMain 0.7s 0.3s cubic-bezier(0.25,0.8,0.25,1) forwards;
        }
        @keyframes cardEnterMain {
            to { opacity: 1; transform: translateY(0); }
        }

        .overlay-section {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(15, 23, 42, 0.92);
            backdrop-filter: blur(10px);
            z-index: 100;
            display: flex;
            visibility: hidden;
            opacity: 0;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            transition: opacity 0.3s ease-out, visibility 0s linear 0.3s;
        }
        .overlay-section.visible {
            visibility: visible;
            opacity: 1;
            transition: opacity 0.3s ease-out, visibility 0s linear 0s;
        }

        .info-content-card {
            background-color: rgba(45, 55, 72, 0.97);
            padding: 1.5rem 2rem;
            border-radius: 1rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            max-width: 700px;
            width: calc(100% - 2rem);
            color: #e2e8f0;
            margin: auto;
            max-height: calc(100vh - 4rem);
            overflow-y: auto;
            position: relative;
        }

        .info-content-card h2 {
            font-size: 1.75rem;
            font-weight: 700;
            color: #38bdf8;
            margin-bottom: 1.25rem;
            text-align: center;
        }
        .info-content-card h3 {
            font-size: 1.15rem;
            font-weight: 600;
            color: #7dd3fc;
            margin-top: 1.25rem;
            margin-bottom: 0.6rem;
            border-bottom: 1px solid rgb(71 85 105 / 0.5);
            padding-bottom: 0.4rem;
        }
        .info-content-card p, .info-content-card li {
            font-size: 0.95rem;
            line-height: 1.65;
            margin-bottom: 0.6rem;
        }
        .info-content-card ul {
            list-style: disc;
            padding-left: 1.5rem;
        }
        .info-content-card code {
            background-color: rgb(51 65 85 / 0.7);
            padding: 0.1rem 0.4rem;
            border-radius: 0.25rem;
            font-family: monospace;
            color: #f0f0f0;
        }

        .loader { border-top-color: #0ea5e9; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .lang-switcher-container select,
        .background-switcher-container select { padding: 0.6rem 1rem; border-radius: 0.5rem; border: 1px solid rgb(71 85 105 / 0.7); background-color: rgb(30 41 59 / 0.85); backdrop-filter: blur(6px); color: white; font-size: 0.875rem; transition: all 0.2s ease-in-out; min-width: 165px; }
        .lang-switcher-container select:hover,
        .background-switcher-container select:hover { border-color: #0ea5e9; background-color: rgb(51 65 85 / 0.9); }
        @media (max-width: 640px) {
            .header-controls {
                flex-direction: column;
                align-items: stretch;
            }
            .lang-switcher-container select,
            .background-switcher-container select {
                width: 100%;
            }
            .background-switcher-container {
                align-items: flex-start;
            }
        }
        #statusArea ul::-webkit-scrollbar { width: 8px; }
        #statusArea ul::-webkit-scrollbar-track { background: rgb(51 65 85); border-radius: 10px; }
        #statusArea ul::-webkit-scrollbar-thumb { background: rgb(71 85 105); border-radius: 10px; }
        #statusArea ul::-webkit-scrollbar-thumb:hover { background: #0ea5e9; }

        input[type="url"]:focus, select:focus { box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.5); border-color: #0ea5e9 !important; }
        .submit-button { transition: all 0.3s ease-out; }
        .submit-button:hover { transform: translateY(-3px) scale(1.03); box-shadow: 0 12px 25px rgba(14, 165, 233, 0.25), 0 8px 10px rgba(14, 165, 233, 0.22); }
        .submit-button:active { transform: translateY(-1px) scale(0.99); box-shadow: 0 5px 10px rgba(14, 165, 233, 0.2), 0 2px 4px rgba(14, 165, 233, 0.18); }
        .status-message-item { opacity: 0; transform: translateY(10px); animation: fadeInItem 0.5s ease-out forwards; }
        @keyframes fadeInItem { to { opacity: 1; transform: translateY(0); } }
        .music-icon-animated svg line { stroke-dasharray: 50; stroke-dashoffset: 50; animation: drawLine 1.5s ease-out forwards infinite alternate; }
        .music-icon-animated svg line:nth-child(1) { animation-delay: 0s; }
        .music-icon-animated svg line:nth-child(2) { animation-delay: 0.2s; }
        .music-icon-animated svg line:nth-child(3) { animation-delay: 0.4s; }
        .music-icon-animated svg line:nth-child(4) { animation-delay: 0.6s; }
        .music-icon-animated svg line:nth-child(5) { animation-delay: 0.8s; }
        .music-icon-animated svg line:nth-child(6) { animation-delay: 1.0s; }
        @keyframes drawLine { 50% { stroke-dashoffset: 0; } 100% { stroke-dashoffset: 0; transform: scaleY(0.3); } }

        .main-card .text-center, .main-card form > div, .main-card .submit-button {
            opacity: 0;
            transform: translateY(15px);
            animation: formItemEnter 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }
        .main-card .text-center { animation-delay: 0.1s; }
        .main-card form > div:nth-child(1) { animation-delay: 0.2s; }
        .main-card form > div:nth-child(2) { animation-delay: 0.3s; }
        .main-card .submit-button { animation-delay: 0.4s; }

        @keyframes formItemEnter {
            to { opacity: 1; transform: translateY(0); }
        }
        .app-footer {
            opacity: 0;
            animation: fadeInFooter 1s 0.5s ease-out forwards;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 0.75rem 1rem;
            background-color: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(10px);
            z-index: 5;
            width: 100%;
        }
        @keyframes fadeInFooter {
            to { opacity: 1; }
        }
        .file-download-status {
            font-size: 0.75rem;
            color: #94a3b8;
            margin-left: 0.5rem;
        }
        .telegram-link-container { margin-top: 0.75rem; font-size: 0.875rem; color: #94a3b8; }
        .telegram-link-container a { color: #38bdf8; text-decoration: underline; }
        .telegram-link-container a:hover { color: #7dd3fc; }

        .close-overlay-button {
            position: fixed;
            top: 1.25rem;
            right: 1.25rem;
            background: rgba(51, 65, 85, 0.5);
            border: 1px solid rgba(100,116,139,0.5);
            color: #cbd5e1;
            font-size: 1.5rem;
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            cursor: pointer;
            line-height: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            z-index: 110;
            backdrop-filter: blur(3px);
        }
>>>>>>> 3d47b10 (feat: load translations from external JSON with lazy fetch)
